---
title: Go语言特性记录和思考
date: 2024/05/22
desc: 🎉这个想法不一定对~~
tags: ['#全部','#Golang']
cover: https://cdn.jsdelivr.net/gh/RookieOHY/wallpaper/blogGo%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E6%80%9D%E8%80%83%E5%B0%81%E9%9D%A2.png
---

[[toc]]

## 😶入参出参类型

> 👉来自go官方的faq：[methods_on_values_or_pointers](https://go.dev/doc/faq#methods_on_values_or_pointers)

入参可以是指针类型和值类型。需要明确：无论哪种方式，都是**值传递**。

- 可见性：修改接收者的成员并且让调用方知道更改了什么内容，入参用指针类型；值类型操作的是参数的副本，变化对于调用者**不可见**
- 效率：**实例对象比较大**，推荐使用指针类型；基本类型、切片、小结构体推荐使用值类型
- 一致性：如果一个类型的方法接受者是指针类型，**其他方法也要保持一致**
- 频次：频次大用指针类型
- 安全：大对象使用值类型，会拷贝副本，有可能发生内存逃逸，导致gc

## 🔍单元测试

go语言原生**自带测试**，基于 `testing` 包实现单元测试。假设新编写了一个 `foo.go` 且需要测试，遵循一些规则：

- 命名：`*_test.go`，如：foo_test.go
- 位置：测试代码文件和正式代码文件放于**同目录**
- 运行：`go test ./... -v`

## 🔍数组和切片

二者的区别：

- 数组声明时需要指定长度
- 切片不需要。
  > 关系：切片是对某个数组连续片段的引用

## ♥函数

- 函数参数可以传递**函数参数**，并在函数内部调用。

```go
// 定义
func Name(arg0 int,f func(int,int){
    f(arg0,1)
})

func F1(a,b int) {
    // ...
}
// 使用
func main(){
    Name(1,F1)
}
```

- 匿名函数可赋值变量、直接调用、返回值

```go
// 赋值 、调用、返回值
x:=func(){}

func(x int,y int){
    //...
}()

func Name(func(arg0 int) int)
```

## 🎈 make 与 new

- `new([]slice)` 返回指针类型变量的**地址**
- `make([]slice,length,cap)` 返回首个元素

## 🎗 方法

> method bind type!

一种特殊的函数，会与**某种类型绑定**。方法的接受者参数位置在方法名之前，和普通参数位置不同。好处：

- 阅读性好，可快速理解方法绑定了哪种类型
- 用于操作类型实例，保存方法的上下文
- 使用时不用传递类型参数，而函数需要

```go
func (recv 接受者值类型 | 指针类型 ) Method(arg0 入参类型) 返回类型{}
```
